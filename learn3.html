<!DOCTYPE html>
<html lang="en">
<head>
   <!--
      Chapter 4 Case Project

      See line 109 for custom html and 184 for javascript and a description of my troubleshooting techniques. 

      Author: Matthew Redekop
      Date:   3/3/2019

      Filename: learn3.html
   -->

  <!-- Standard Meta from Semantic-UI
    html template and JS framework from https://semantic-ui.com/ --> 
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0">

  <!-- Site Properties -->
  <title>Learn JS</title>
<!-- load Semantic-UI framework materials -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
  <link rel="stylesheet" type="text/css" href="custom.css">

  <script src="modernizr.custom.05819.js"></script>

  <!-- load JQuery, this drives the semantic-ui scripts -->
  <script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/components/visibility.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/components/sidebar.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/components/transition.js"></script>
  <script>
  $(document)
    .ready(function() {

      // fix main menu to page on passing, from semantic-ui
      $('.main.menu').visibility({
        type: 'fixed'
      });
      $('.overlay').visibility({
        type: 'fixed',
        offset: 80
      });

      // lazy load images, from semantic-ui
      $('.image').visibility({
        type: 'image',
        transition: 'vertical flip in',
        duration: 500
      });

      // show dropdown on hover, from semantic-ui
      $('.main.menu  .ui.dropdown').dropdown({
        on: 'hover'
      });
    })
  ;
  </script>

</head>
<body>

  <div class="ui main text container">
    <!-- Main header area -->
    <h1 class="ui header">Learn OOP JS</h1>
    <p>This page will contain information on how to use OOP techniques in JS</p>
  </div>


  <div class="ui borderless main menu">
    <div class="ui text container">
      <div class="header item">
        <img class="logo" src="images/0.jpeg" alt="Me">
        <a href="index.html">Learn OOS JS Home</a>
      </div>
        <a href="ECMAScript.html" class="item">ECMAScript</a>
        <a href="json.html" class="item">JSON</a>
<!-- comment out ui pieces that may not be needed yet
    <a href="#" class="ui right floated dropdown item">
        Dropdown <i class="dropdown icon"></i>
        <div class="menu">
          <div class="item">Link Item</div>
          <div class="item">Link Item</div>
          <div class="divider"></div>
          <div class="header">Header Item</div>
          <div class="item">
            <i class="dropdown icon"></i>
            Sub Menu
            <div class="menu">
              <div class="item">Link Item</div>
              <div class="item">Link Item</div>
            </div>
          </div>
          <div class="item">Link Item</div>
        </div>
      </a>-->
    </div>
  </div>
<div class="ui text container">
  <p>Assignment 4</p>
  <p>Module 4: Exception handling from Chapter 4</p>

   <article style="width:500px">


      <h2>In the future, you will be older. Specifically:</h2>
      <form>
          <fieldset>
            <label for="ageField">
              Enter your age: 
            </label>
            <input type="number" id="ageField" />
          </fieldset>
          <fieldset>
            <label for="dateField">
              Enter a year in the future (eg. 2022): 
            </label>
            <input type="number" id="dateField">
          </fieldset>
          <fieldset>
            <button type="button" id="getAge">Get your age...</button>
          </fieldset>
     </form>
     <h2 id="result" style="display:none;">In the year <span id="outYear"></span> you will be <span id="outAge"></span>. <span id="outMessage"></span></h2>

   </article>

</div>


  <div class="ui inverted vertical footer segment">
    <div class="ui center aligned container">
      <div class="ui stackable inverted divided grid">
        <div class="three wide column">
          <h4 class="ui inverted header">Group 1</h4>
          <div class="ui inverted link list">
            <a href="#" class="item">Link One</a>
            <a href="#" class="item">Link Two</a>
            <a href="#" class="item">Link Three</a>
            <a href="#" class="item">Link Four</a>
          </div>
        </div>
        <div class="three wide column">
          <h4 class="ui inverted header">Group 2</h4>
          <div class="ui inverted link list">
            <a href="#" class="item">Link One</a>
            <a href="#" class="item">Link Two</a>
            <a href="#" class="item">Link Three</a>
            <a href="#" class="item">Link Four</a>
          </div>
        </div>
        <div class="three wide column">
          <h4 class="ui inverted header">Group 3</h4>
          <div class="ui inverted link list">
            <a href="#" class="item">Link One</a>
            <a href="#" class="item">Link Two</a>
            <a href="#" class="item">Link Three</a>
            <a href="#" class="item">Link Four</a>
          </div>
        </div>
        <div class="seven wide column">
          <h4 class="ui inverted header">Footer Header</h4>
          <p>Extra space for a call to action inside the footer that could help re-engage users.</p>
        </div>
      </div>
      <div class="ui inverted section divider"></div>
      <img src="images/0.jpeg" alt="Me" class="ui centered mini image">
      <div class="ui horizontal inverted small divided link list">
        <a class="item" href="#">Site Map</a>
        <a class="item" href="#">Contact Us</a>
        <a class="item" href="#">Terms and Conditions</a>
        <a class="item" href="#">Privacy Policy</a>
      </div>
    </div>
  </div>

<!-- Below is my custom script that calculates your age in the future. It has form validation to make sure there is a number 
     entered. the core is taken from assignment 2 and 3 but adds changes for Assignment 4 ... to show use of error handling 
     by adding try/catch exceptions and where I replaced the "else" statement with each having an alert() to showing the error
     in 1 alert() at the catch statement after an excption from the try/catch statement. I had first used console logging to
     figure out if my calculations were correct and I have re-added those to show how I did it. But, what I see fomr that 
     logging is that using a breakpoint and then looking at the Scope block in the Chrome debugging tools that you can see 
     what the vartiables are set to and see if they look logical. The advantage of the console, though, is that you can 
     format things so that they are readable and then, as in this example at line 224, you can print out a formula directly
     from the variables to test. In my previous version for assignment 3 I also had a logic error on the validation of the age
     field. When I changed it over to the try/catch, it made this error obvious. 
-->
<script>
  function dateAge() { 

    var age = document.getElementById("ageField").value;
    var year =parseInt(document.getElementById("dateField").value, 10);
    var today = new Date();
    var theYear = today.getFullYear();
    
   try {
      if (isNaN(year)) {  
          // validation to ensure that the year is a number. 
          throw "Error: Come on, play along, enter a year between 2019 and whenever.";
        } else {
          // make sure the year is in the future
          if (year >= theYear){
            if (year < (theYear + 134)){
              // validation to ensure that the age is a number. 
              age = parseInt(age, 10);

              //make sure the age is in a reasonable range
              if (isNaN(age)){
                throw "Error: come on, play along, enter your age.";
              } else if(age < 133 && age > 0) {
                var outAge = (year - theYear) + age;

                document.getElementById("result").style.display = "block";
                document.getElementById("outYear").textContent = year;
                document.getElementById("outAge").textContent = outAge;

                console.log(outAge  + " = ((" + year + " - " + theYear + ") + " + age +")");

                var message = "";
                if ( outAge <= 12 ){
                  message = "You will still be a child."

                } else if (outAge >= 13 && outAge <= 19) {
                  message = "You will be a teenager";
                  if (outAge == 16){
                    message += ". You will be able to get a drivers license";
                  }
                  if (outAge >= 18){
                    message += " and be able to vote and join the Army";
                  }
                  message +=".";
                } else if (outAge > 19 && outAge < 65){
                  message = "You will be an adult, have fun with that."
                  if (outAge == 21) {
                    message+= " You can now drink alcohol legally."
                  }
                  if (outAge > 50){
                    message += " And, you will be over the hill. "
                  }
                } else if (outAge >= 65 && outAge < 100) {
                  message = " You will be a senior citizen and hopefully be retired."
                } else {
                  message = "You will have lived longer than most."
                  if (outAge >120){
                    message += " And, might even be the oldest person ever."
                  }
                }

                document.getElementById("outMessage").textContent = message;

              } else {
                throw "Error: come on, play along, enter your real age.";
              }

            } else {
               throw "After "+ (theYear + 134) + " you will have had a long life, try a differnt year."; 

            } 
          } else {
             throw "Come on, play along, enter a year between 2019 and whenever.";
          }
        }
      } catch(message) {
        alert(message);
        var age = document.getElementById("ageField").value = "";
        var year =document.getElementById("dateField").value = "";
    }
}
    // set up submit button event to accomidate older browsers
  if (document.getElementById("getAge").addEventListener) { 
    document.getElementById("getAge").addEventListener("click", dateAge, false);

  } else if (document.getElementById("getAge").attachEvent) { 
    document.getElementById("getAge").attachEvent("click", dateAge);
  }


</script>

</body>

</html>
