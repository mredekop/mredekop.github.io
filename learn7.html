<!DOCTYPE html>
<html lang="en">
<head>
   <!--
      Chapter 12 Case Project

      See line 109 for custom html and 184 for javascript and a description of my troubleshooting techniques. 

      Author: Matthew Redekop
      Date:   4/21/2019

      Filename: learn7.html
   -->

  <!-- Standard Meta from Semantic-UI
    html template and JS framework from https://semantic-ui.com/ --> 
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0">

  <!-- Site Properties -->
  <title>Learn JS</title>
<!-- load Semantic-UI framework materials -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
  <link rel="stylesheet" type="text/css" href="custom.css">

  <script src="modernizr.custom.05819.js"></script>

  <!-- load JQuery, this drives the semantic-ui scripts -->
  <script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/components/visibility.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/components/sidebar.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/components/transition.js"></script>
  <script>
  $(document)
    .ready(function() {

      // fix main menu to page on passing, from semantic-ui
      $('.main.menu').visibility({
        type: 'fixed'
      });
      $('.overlay').visibility({
        type: 'fixed',
        offset: 80
      });

      // lazy load images, from semantic-ui
      $('.image').visibility({
        type: 'image',
        transition: 'vertical flip in',
        duration: 500
      });

      // show dropdown on hover, from semantic-ui
      $('.main.menu  .ui.dropdown').dropdown({
        on: 'hover'
      });
    })
  ;
  </script>

</head>
<body>

  <div class="ui main text container">
    <!-- Main header area -->
    <h1 class="ui header">Learn OOP JS</h1>
    <p>This page will contain information on how to use OOP techniques in JS</p>
  </div>


  <div class="ui borderless main menu">
    <div class="ui text container">
      <div class="header item">
        <img class="logo" src="images/0.jpeg" alt="Me">
        <a href="index.html">Learn OOS JS Home</a>
      </div>
        <a href="ECMAScript.html" class="item">ECMAScript</a>
        <a href="json.html" class="item">JSON</a>
<!-- comment out ui pieces that may not be needed yet
    <a href="#" class="ui right floated dropdown item">
        Dropdown <i class="dropdown icon"></i>
        <div class="menu">
          <div class="item">Link Item</div>
          <div class="item">Link Item</div>
          <div class="divider"></div>
          <div class="header">Header Item</div>
          <div class="item">
            <i class="dropdown icon"></i>
            Sub Menu
            <div class="menu">
              <div class="item">Link Item</div>
              <div class="item">Link Item</div>
            </div>
          </div>
          <div class="item">Link Item</div>
        </div>
      </a>-->
    </div>
  </div>
<div class="ui text container">
  <p>Assignment 7</p>
  <p>Next lesson. Convert all JS functions to jQuery </p>

   <article style="width:500px">
      <h2>In the future, you will be older. Specifically:</h2>
      <form>
          <fieldset id="snarkLevelFieldset">
            <legend>Choose an Error Snark Level (Option 1):</legend>
            <select id="snarkLevel">
              <option value="1">Mundane</option>
              <option value="2">Snarky</option>
              <option value="3">Extra Snarky</option>
            </select>
          </fieldset>
          <fieldset id="futureFieldset">
             <legend>Deep future (additional years in year field, Options 2 and 3):</legend>
             <input type="radio" name="future" id="future-y" value="yes" />
             <label for="thin">Yes</label>
             <input type="radio" name="future" id="future-n" value="no" />
             <label for="thick">No</label>
             <span id="futureOpts">Add 
                <input type="radio" name="deepFuture" id="future100" value="100" />
                <label for="thin">+100 Years</label>
                <input type="radio" name="deepFuture" id="future1000" value="1000" />
                <label for="thick">+1000 years</label>

            </span>
          </fieldset>

          <fieldset id="yearFieldset">
            <label for="dateField">
              Enter a year in the future (eg. 2022, Option 4): 
            </label>
            <input type="number" id="dateField">
          </fieldset>
          <fieldset id="ageFieldset">
            <label for="ageField">
              Enter your age (Option 5): 
            </label>
            <input type="number" id="ageField" />
          </fieldset>

          <fieldset>
            <legend>Output Options Selected:</legend>
            <div id="optionsText"></div>
          </fieldset>

          <fieldset>
            <button type="button" id="getAge">Get your age...</button>
          </fieldset>
     </form>
     <h2 id="result" style="display:none;">In the year <span id="outYear"></span> you will be <span id="outAge"></span>. <span id="outMessage"></span></h2>

   </article>

</div>


  <div class="ui inverted vertical footer segment">
    <div class="ui center aligned container">
      <div class="ui stackable inverted divided grid">
        <div class="three wide column">
          <h4 class="ui inverted header">Group 1</h4>
          <div class="ui inverted link list">
            <a href="#" class="item">Link One</a>
            <a href="#" class="item">Link Two</a>
            <a href="#" class="item">Link Three</a>
            <a href="#" class="item">Link Four</a>
          </div>
        </div>
        <div class="three wide column">
          <h4 class="ui inverted header">Group 2</h4>
          <div class="ui inverted link list">
            <a href="#" class="item">Link One</a>
            <a href="#" class="item">Link Two</a>
            <a href="#" class="item">Link Three</a>
            <a href="#" class="item">Link Four</a>
          </div>
        </div>
        <div class="three wide column">
          <h4 class="ui inverted header">Group 3</h4>
          <div class="ui inverted link list">
            <a href="#" class="item">Link One</a>
            <a href="#" class="item">Link Two</a>
            <a href="#" class="item">Link Three</a>
            <a href="#" class="item">Link Four</a>
          </div>
        </div>
        <div class="seven wide column">
          <h4 class="ui inverted header">Footer Header</h4>
          <p>Extra space for a call to action inside the footer that could help re-engage users.</p>
        </div>
      </div>
      <div class="ui inverted section divider"></div>
      <img src="images/0.jpeg" alt="Me" class="ui centered mini image">
      <div class="ui horizontal inverted small divided link list">
        <a class="item" href="#">Site Map</a>
        <a class="item" href="#">Contact Us</a>
        <a class="item" href="#">Terms and Conditions</a>
        <a class="item" href="#">Privacy Policy</a>
      </div>
    </div>
  </div>

<!-- Below is my custom script that calculates your age in the future. The core is taken from the other
     assignments but I have changed all of the event handler, select and data capture functions to jQuery.
 -->
<script>

  var customizationOptions = [];

function showSelectedOptions(){
    // make sure that the options out put and options array are empty
    //converted to jQuery
    $("#optionsText").html(" ");
    customizationOptions = [];

    // get options and push them into the array
    // converted to jQuery
    if ($("#snarkLevel").val() > -1){
      // converted to jQuery
      let snark = $("#snarkLevel option:selected").text();
      customizationOptions.push("Snark Level: " + snark);

    }
    // get the range of ages in the future allowed, add then to the array. 
    //converted to jQuery style selector
    if ($('[name=future]:first').prop('checked') || $('[name=future]:last').prop('checked')){
      if (document.getElementsByName("future")[0].checked) {
        customizationOptions.push("Deep Future");
        //converted to jQuery style selector
        if ($('[name=deepFuture]:first').prop('checked') || $('[name=deepFuture]:last').prop('checked')){
           customizationOptions.push("Allow an additional " + $('input[name="deepFuture"]:checked').val() + " years in the year field");
        }
      }
    }

    // add date selection to the array
    // converted to jQuery
    if($("#dateField").val() != "") {
      customizationOptions.push("Year: " + $("#dateField").val());
    }
    // add age selection to the array
    // converted to jQuery
    if($("#ageField").val() != "") {
      customizationOptions.push("Age: " + $("#ageField").val());
    }
    // print out the selected options to the screen:
    // converted to jQuery
    $("#optionsText").html(customizationOptions.join("<br> "));
}

function dateAge() { 

    // clear out old error highlights by getting all fieldssets and looping thoufhg them to change bg to white.
    //converted to jQuery
    var fields = $("fieldset");

    for(let i = 0; i < fields.length; i++){
      $(fields[i]).css('background-color', 'white');
      //fields[i].style.backgroundColor = "white";
    }





    // main variables used for calculations
    var age = $("#ageField").val();
    var year =parseInt($("#dateField").val(), 10);
    var today = new Date();
    var theYear = today.getFullYear();
    // this will beset by the Deep Future option to lengthen time span allowable to calculate
    var yearModifier = 134;

    // object array to hld differnet levels of error responses. 
    var responses = {
      1: {futureType: "Please select a value for the future type.",
          deepFuture: "Please enter an additional timeframe.", 
          yearAdd: "Please enter a year between this year and ",
          ageNumber: "Please enter a numerical age.",
          realAge: "Please enter a number lower than 133",
          yearTooBig: " is too larege, enter a differnt year or selectiong a different Deep Future option.",
          yearTooLitte: "Please enter a year greater than this year."
        },
      2: {futureType:"Feelin' immortal? Enter a future type.",
          deepFuture:"Since you are feeling immortal, enter how immortal.",
          yearAdd: "Come on, play along, enter a year between this year and ",
          ageNumber: "Come on, play along, enter your age. in a number.",
          realAge:"come on, play along, enter your real age.",
          yearTooBig:" you will have had a long life, try a different year or selectiong a different Deep Future option.",
          yearTooLitte:"Come on, play along, enter a year between this year and whenever."
        },
      3: {futureType:"Just enter a friggin' future type.",
          deepFuture:"Just choose a friggin' additional time.",
          yearAdd:"Just choose a year beteween this year and ",
          ageNumber: "Enter your age as a number, doofus.",
          realAge: "What a nuisance, enter YOUR age,",
          yearTooBig:" you will have had a long life and be dead. Try selectiong a different Deep Future option..",
          yearTooLitte: "ugh, add a year and I am not going to tell you that it has to be in the future."
        }
    }

    // clear outand start results text
    var message = "";
    
    try {
      //converted to jQuery
      var snark = $("#snarkLevel").val();

      if( snark === -1 || snark == undefined){
        // converted to jQuery
        $('#snarkLevelFieldset').css('background-color', 'lightYellow');

        throw "To start, you must select a snark level.";
      }    

      // test radio button for selection.
  
//      var myRadio = document.getElementsByName("future");      
//      var deepFuture = document.getElementsByName("deepFuture");

      // converted to jQuery
      if ($('input[name=future]:checked').val() == undefined){
        // if no selection then change the element color to yellow and stop processing. 
        // converted to jQuery
        $('#futureFieldset').css('background-color', 'lightYellow');
        throw "Error: " + responses[snark].futureType;
      // optional validation for Deep furteure selection, if no then this will be skipped.
      // converted to jQuery
      } else if ($('input[name="future"]:checked').val() == "yes") {
        // convertedto jQuery
        if ($('input[name=deepFuture]:checked').val() == undefined) {
           // if no selection then change the element color to yellow and stop processing. 
          $('#futureFieldset').css('background-color', 'lightYellow');
          throw "Error: " + responses[snark].deepFuture;
        } else {
          // converted to jQuery
          yearModifier = $('input[name="deepFuture"]:checked').val();
        }
      }

      if (isNaN(year)) {  
          // validation to ensure that the year is a number. 
        // if no apporopriate entry, then change the element color to yellow and stop processing. 
        // converted to jQery
          $('#yearFieldset').css('background-color', 'lightYellow');
          throw "Error: " + responses[snark].yearAdd + (parseInt(yearModifier) + theYear);
        } else {
          // make sure the year is in the future
          if (year >= theYear) {
            if (year <= theYear + parseInt(yearModifier) ){
              // validation to ensure that the age is a number. 
              age = parseInt(age, 10);

              //make sure the age is in a reasonable range
              if (isNaN(age)){
                $('#yearFieldset').css('background-color', 'lightYellow');
                throw "Error: " + responses[snark].ageNumber;
              } else if(age < 133 && age > 0) {
                var outAge = (year - theYear) + age;


                // make the results elements visible
                // converted to jQuery
                $("#result").show();
                $("#outYear").text(year);
                $("#outAge").text(outAge);
                // troubleshooting console
                console.log(outAge  + " = ((" + year + " - " + theYear + ") + " + age +")");

                // main calculation if all validation passes...
                var message = "";
                if ( outAge <= 12 ){
                  message = "You will still be a child."

                } else if (outAge >= 13 && outAge <= 19) {
                  message = "You will be a teenager";
                  if (outAge == 16){
                    message += ". You will be able to get a drivers license";
                  }
                  if (outAge >= 18){
                    message += " and be able to vote and join the Army";
                  }
                  message +=".";
                } else if (outAge > 19 && outAge < 65){
                  message = "You will be an adult, have fun with that."
                  if (outAge == 21) {
                    message+= " You can now drink alcohol legally."
                  }
                  if (outAge > 50){
                    message += " And, you will be over the hill. "
                  }
                } else if (outAge >= 65 && outAge < 100) {
                  message = " You will be a senior citizen and hopefully be retired."
                } else {
                  message = "You will have lived longer than most."
                  if (outAge >120){
                    message += " And, might even be the oldest person ever."
                  }
                }

                $("#outMessage").text(message);

              } else {
                // converted to jQuery
                $('#ageFieldset').css('background-color', 'lightYellow');
                throw "Error: " + responses[snark].realAge;
              }

            } else {
              // converted to jQuery
              $('#yearFieldset').css('background-color', 'lightYellow');
               throw "After "+ (theYear + parseInt(yearModifier)) + responses[snark].yearTooBig; 

            } 
          } else {
            $('#yearFieldset').css('background-color', 'lightYellow');
             throw responses[snark].yearTooLitte;
          }
        }
      } catch(message) {
        alert(message);
    }
}
  // set up submit button event to accomidate older browsers


// make the select box have no selection
// converted to jQuery
$("#snarkLevel").val(-1);
// hide future options subcategory, wil only display when furure = yes
$("#futureOpts").hide();

// reset all form elements on load to acconodate reads that save the input selections.
// converted to jQuery
$("#ageField").val("");
$("#dateField").val("");
$('input[name=future]').prop('checked', false);
$('input[name=deepFuture]').prop('checked', false);


// action for radio button that allows the age range to be extended.
function futureOptions(ev){
// converted to Jquery
  if ($('input[name="future"]:checked').val() == "yes") {
    $('#futureOpts').show();
  } else {
    $('#futureOpts').hide();
  }
}


// converted to jQuery
$("#getAge").click(dateAge);
//get option 1 to add an event listener to show options on changes in form
// converted to jQuery
$('input[name=future]').click(showSelectedOptions);
$('input[name=future]').click(futureOptions);
//get option 2 to add an event listener to show options
// converted to jQuery
$('input[name=deepFuture]').click(showSelectedOptions);


//get option 3 to add an event listener to show options on changes in form
// converted to jQuery
$("#snarkLevel").change(showSelectedOptions);

//get option 4 to add an event listener to show options on changes in form
// converted to jQuery
$("#dateField").blur(showSelectedOptions);

//get option 5 to add an event listener to show options on changes in form
document.getElementById("ageField").addEventListener("input", showSelectedOptions, false);





</script>

</body>

</html>
